{% extends "base.html" %}

{% block head %}
<style>
  /* Override body background only for admin page */
  body {
    background: #23272A !important;
  }
  /* Ensure the wrapping container remains transparent */
  .login-container {
    background: transparent !important;
    padding: 20px 0;
  }
  /* Admin panel box: keep same size as before, remove outer border */
  .login-box {
    width: 90%;
    max-width: 1000px;
    padding: 20px;
    background: #2C2F33;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3); /* Floating effect remains */
    border: none; /* Removed border so there's no joining with outside background */
  }
</style>
{% endblock %}

{% block content %}
<div class="login-container">
  <div class="login-box">
    <h2 style="text-align: center; color: #9AB8D3;">{{ department | upper }} Admin Panel</h2>
    
    <!-- Upload Notice Section -->
    <div class="upload-section" style="margin-bottom:20px;">
      <h3 style="text-align:center; color: #9AB8D3;">Upload Notice</h3>
      <form method="POST" action="{{ url_for('admin', dept=department) }}" enctype="multipart/form-data">
        <div class="form-group">
          <input type="file" name="file" required 
                 style="width: 100%; padding:8px; background: #23272A; color: #D1D1D1; border-radius: 4px;">
        </div>
        <input type="submit" value="Upload" class="btn" 
               style="background-color: #2CB1C0; color: #23272A;">
      </form>
    </div>

    <!-- Notices Display Section -->
    <div class="notices-section">
      <h3 style="text-align:center; color: #9AB8D3;">Uploaded Notices</h3>
      <div class="notices-grid" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
        {% for notice in immediate_notices %}
        <div class="notice-card" style="flex: 1 1 300px; max-width:300px; background: #23272A; padding:10px; border-radius:4px;">
          {% set file_url = url_for('uploaded_file', filename=notice[2]) %}
          <a href="{{ file_url }}" target="_blank" style="color: #2CB1C0;">View Notice</a>
          <div class="notice-actions" style="text-align:center;">
            <a href="{{ url_for('delete_notice', notice_id=notice[0]) }}" class="btn" 
               style="background-color: #A33E3E; color: #fff;" onclick="return confirm('Delete this notice?');">
              Delete
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Admin Navigation -->
    <div class="admin-nav" style="text-align:center; margin-top:20px;">
      <a href="{{ url_for('dashboard') }}" class="btn" 
         style="background-color: #2CB1C0; color: #23272A;">
         Back to Dashboard
      </a>
    </div>
  </div>
</div>
{% endblock %}
